FROM openjdk:17-oracle
ARG SPRING_SECURITY_USER_NAME
ARG SPRING_SECURITY_USER_PASSWORD
ARG SERVER_SSL_KEY_STORE_PASSWORD
ARG SPRING_DATASOURCE_URL
ARG SPRING_DATASOURCE_USERNAME
ARG SPRING_DATASOURCE_PASSWORD
ARG JWT_SECRET
ARG YHSH_ADMIN_USERNAME
ARG YHSH_ADMIN_PASSWORD
ARG YHSH_ADMIN_EMAIL
ARG YHSH_MAIL_HOST
ARG YHSH_MAIL_USERNAME
ARG YHSH_MAIL_PASSWORD

ENV SPRING_SECURITY_USER_NAME=$SPRING_SECURITY_USER_NAME
ENV SPRING_SECURITY_USER_PASSWORD=$SPRING_SECURITY_USER_PASSWORD
ENV SERVER_SSL_KEY_STORE_PASSWORD=$SERVER_SSL_KEY_STORE_PASSWORD
ENV SPRING_DATASOURCE_URL=$SPRING_DATASOURCE_URL
ENV SPRING_DATASOURCE_USERNAME=$SPRING_DATASOURCE_USERNAME
ENV SPRING_DATASOURCE_PASSWORD=$SPRING_DATASOURCE_PASSWORD
ENV JWT_SECRET=$JWT_SECRET
ENV YHSH_ADMIN_USERNAME=$YHSH_ADMIN_USERNAME
ENV YHSH_ADMIN_PASSWORD=$YHSH_ADMIN_PASSWORD
ENV YHSH_ADMIN_EMAIL=$YHSH_ADMIN_EMAIL
ENV YHSH_MAIL_HOST=$YHSH_MAIL_HOST
ENV YHSH_MAIL_USERNAME=$YHSH_MAIL_USERNAME
ENV YHSH_MAIL_PASSWORD=$YHSH_MAIL_PASSWORD
ARG JAR_FILE=*.jar
COPY ${JAR_FILE} app.jar
RUN printenv
ENTRYPOINT ["java","-jar","/app.jar", "--spring.profiles.active=prod"]